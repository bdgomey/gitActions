name: Terraform

on: [push]



jobs:

  AzureLogin:
    runs-on: ubuntu-latest
    steps:
    
    - uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

  TerraformInstall:
    runs-on: ubuntu-latest
    steps:
    
    - uses: actions/checkout@v4
    - uses: hashicorp/setup-terraform@v2
      with:
        terraform_version: "1.6.1"
    - run: terraform --version

  TerraformInit:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - run: terraform init
    - run: terraform apply --auto-approve
