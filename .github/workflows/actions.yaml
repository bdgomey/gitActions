on: [push]

name: AzureLoginSample

jobs:

  AzureLogin:
    runs-on: ubuntu-latest
    steps:
    
    - uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}
    
    - run: |
        az vm list-ip-addresses --resource-group myResourceGroup --name myVM --query "[].virtualMachine.network.publicIpAddresses[].ipAddress" -o tsv

  TerraformInstall:
    runs-on: ubuntu-latest
    steps:
    
    - uses: actions/checkout@v4
    - uses: hashicorp/setup-terraform@v2
      with:
        terraform_version: "1.6.1"
    - run: terraform --version

  TerraformInit:
    runs-on: ubuntu-latest
    steps:
    - run: terraform init
